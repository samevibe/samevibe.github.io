(this.webpackJsonpsamevibe=this.webpackJsonpsamevibe||[]).push([[0],{168:function(t,e){},170:function(t,e){},183:function(t,e){},185:function(t,e){},213:function(t,e){},215:function(t,e){},216:function(t,e){},221:function(t,e){},223:function(t,e){},229:function(t,e){},231:function(t,e){},250:function(t,e){},262:function(t,e){},265:function(t,e){},282:function(t,e,o){},289:function(t,e,o){},290:function(t,e,o){},317:function(t,e,o){"use strict";o.r(e);var i=o(10),n=o(78),_=o.n(n),c=o(152),S=o(0),O=o.n(S),r=o(50),a=o.n(r),E=o(3),T=function(t){return Object(E.jsx)("h1",{children:"authorized"})},d=o(41),u=o(153),P=o(154),C=o(155),R=o.n(C),v=function(){function t(e){Object(u.a)(this,t),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=e.tokenKey,this.cookieKey=e.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(e.publicKey)?this.authorized=!0:this.removeToken()}return Object(P.a)(t,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var t=localStorage.getItem(this.tokenKey);if(t)return t;var e=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(t=e?decodeURIComponent(e[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(t){if(!this.tokenString)return!1;try{return R.a.verify(this.tokenString,t,{algorithms:["RS256"]}),!0}catch(e){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),t}(),s=(o(282),o(283));var A=function(t){return Object(E.jsx)("form",{className:"login",children:Object(E.jsx)("img",{src:"/img/ya-auth.svg",onClick:function(){var e=s.parse(s.format({protocol:"https",hostname:"oauth.yandex.ru",pathname:"/authorize",query:{response_type:"code",client_id:t.ya.clientID,redirect_uri:t.ya.callbackURL}}));window.open(e.href,"_self")},alt:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u044f\u043d\u0434\u0435\u043a\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})},h=function(t){var e=new v(t),o=O.a.useState(e.isAuthorized());return Object(d.a)(o,1)[0]?Object(E.jsx)("h1",{children:"authorized"}):Object(E.jsx)(A,Object(i.a)({},t))};o(289);var D=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"404 Not Found"}),Object(E.jsx)("a",{href:"/",children:"go back to main page"})]})},j=(o(290),o(40)),b=o(14),l=o(38),K=o(158),H=["children","appSettings"];var p=function(t){t.children;var e=t.appSettings,o=Object(K.a)(t,H);return Object(E.jsx)(b.b,Object(i.a)(Object(i.a)({},o),{},{render:function(){return Object(E.jsx)(b.a,{to:(null===e||void 0===e?void 0:e.basePath)+"/login"})}}))},W=o(18),f=o(32),L=o(143),U=!1,N={authorized:U,payload:{}},I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTHORIZE":case"LOGOUT":return Object(i.a)(Object(i.a)({},t),{},{authorized:U});default:return t}},F=function(t){return Object(f.b)({router:Object(l.b)(t),auth:I})},g=Object(W.a)();var k=o(51),y=o.n(k);var x=function(t){var e=Object(S.useState)(),o=Object(d.a)(e,2),i=o[0],n=o[1],_=Object(S.useState)(""),c=Object(d.a)(_,2),O=c[0],r=c[1];return Object(S.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("code")+"",o=new FormData;o.append("grant_type","authorization_code"),o.append("code",e),o.append("client_id",t.ya.clientID),o.append("client_secret",t.ya.clientSecret),y.a.post("https://oauth.yandex.ru/token",o).then((function(t){var e,o,i;if(void 0!==(null===(e=t.data)||void 0===e?void 0:e.error))throw null===(i=t.data)||void 0===i?void 0:i.error_description;console.log(null===(o=t.data)||void 0===o?void 0:o.access_token),n(t.data),r(t.data.access_token)})).catch((function(t){r(t.toString())}))}),[n,t.ya.clientID,t.ya.clientSecret]),console.log(i),Object(E.jsx)("h1",{children:O})},m=function(){var t=Object(c.a)(_.a.mark((function t(e){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("https://github.com/login/oauth/authorize",{params:e,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){return{error:0,data:t.data}})).catch((function(t){return console.error(t),{error:1,data:null}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),B={client_id:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GH_APP_CLIENT_ID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GH_APP_CLIENT_ID):"",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GH_APP_CALLBACK?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GH_APP_CALLBACK):""};""!==(null===B||void 0===B?void 0:B.client_id)&&m(B).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));var V,w=(V={},Object(f.d)(F(g),V,Object(f.c)(Object(f.a)(Object(L.a)(g))))),z={basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BASE_PATH):""},Y={tokenKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TOKEN_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_TOKEN_KEY):"",cookieKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_COOKIE_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_COOKIE_KEY):"",publicKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PUBLIC_KEY):"",api:{basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_PATH):"",domain:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CURRENT_DOMAIN?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_CURRENT_DOMAIN):""},ya:{clientID:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CID):"",clientSecret:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CIS?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CIS):"",callbackURL:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CURI?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_YA_CURI):""}};a.a.render(Object(E.jsx)(j.a,{store:w,children:Object(E.jsx)(l.a,{history:g,children:Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(b.d,{children:[Object(E.jsx)(b.b,{exact:!0,path:(null===z||void 0===z?void 0:z.basePath)+"/verification/ya",children:Object(E.jsx)(O.a.StrictMode,{children:Object(E.jsx)(x,Object(i.a)({},Y))})}),Object(E.jsx)(b.b,{exact:!0,path:(null===z||void 0===z?void 0:z.basePath)+"/login",children:Object(E.jsx)(O.a.StrictMode,{children:Object(E.jsx)(h,Object(i.a)({},Y))})}),Object(E.jsx)(p,{exact:!0,path:null===z||void 0===z?void 0:z.basePath,appSettings:z,children:Object(E.jsx)(O.a.StrictMode,{children:Object(E.jsx)(T,Object(i.a)({},Y))})}),Object(E.jsx)(b.b,{component:D})]})})})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.1221658e.chunk.js.map