(this.webpackJsonpsamevibe=this.webpackJsonpsamevibe||[]).push([[0],{168:function(t,_){},170:function(t,_){},183:function(t,_){},185:function(t,_){},213:function(t,_){},215:function(t,_){},216:function(t,_){},221:function(t,_){},223:function(t,_){},229:function(t,_){},231:function(t,_){},250:function(t,_){},262:function(t,_){},265:function(t,_){},282:function(t,_,e){},289:function(t,_,e){},290:function(t,_,e){},317:function(t,_,e){"use strict";e.r(_);var o=e(10),n=e(78),i=e.n(n),c=e(152),A=e(0),r=e.n(A),P=e(50),E=e.n(P),a=e(3),T=function(t){return Object(a.jsx)("h1",{children:"authorized"})},C=e(41),S=e(153),O=e(154),d=e(155),R=e.n(d),u=function(){function t(_){Object(S.a)(this,t),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=_.tokenKey,this.cookieKey=_.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(_.publicKey)?this.authorized=!0:this.removeToken()}return Object(O.a)(t,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var t=localStorage.getItem(this.tokenKey);if(t)return t;var _=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(t=_?decodeURIComponent(_[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(t){if(!this.tokenString)return!1;try{return R.a.verify(this.tokenString,t,{algorithms:["RS256"]}),!0}catch(_){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),t}(),s=(e(282),e(283));var v=function(t){return Object(a.jsx)("form",{className:"login",children:Object(a.jsx)("img",{src:"/img/ya-auth.svg",onClick:function(){var _=s.parse(s.format({protocol:"https",hostname:"oauth.yandex.ru",pathname:"/authorize",query:{response_type:"code",client_id:t.ya.clientID,redirect_uri:t.ya.callbackURL}}));window.open(_.href,"_self")},alt:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u044f\u043d\u0434\u0435\u043a\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})},h=function(t){console.log(t.ya);var _=new u(t),e=r.a.useState(_.isAuthorized());return Object(C.a)(e,1)[0]?Object(a.jsx)("h1",{children:"authorized"}):Object(a.jsx)(v,Object(o.a)({},t))};e(289);var l=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"404 Not Found"}),Object(a.jsx)("a",{href:"/",children:"go back to main page"})]})},j=(e(290),e(40)),b=e(14),D=e(38),I=e(158),K=["children","appSettings"];var p=function(t){t.children;var _=t.appSettings,e=Object(I.a)(t,K);return Object(a.jsx)(b.b,Object(o.a)(Object(o.a)({},e),{},{render:function(){return Object(a.jsx)(b.a,{to:(null===_||void 0===_?void 0:_.basePath)+"/login"})}}))},f=e(18),U=e(32),H=e(143),Y=!1,W={authorized:Y,payload:{}},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,_=arguments.length>1?arguments[1]:void 0;switch(_.type){case"AUTHORIZE":case"LOGOUT":return Object(o.a)(Object(o.a)({},t),{},{authorized:Y});default:return t}},L=function(t){return Object(U.b)({router:Object(D.b)(t),auth:g})},N=Object(f.a)();var k=e(51),y=e.n(k);var F=function(t){var _=Object(A.useState)(),e=Object(C.a)(_,2),o=e[0],n=e[1],i=Object(A.useState)(""),c=Object(C.a)(i,2),r=c[0],P=c[1];return Object(A.useEffect)((function(){var _=new URLSearchParams(window.location.search).get("code")+"",e=new FormData;e.append("grant_type","authorization_code"),e.append("code",_),e.append("client_id",t.ya.clientID),e.append("client_secret",t.ya.clientSecret),y.a.post("https://oauth.yandex.ru/token",e).then((function(t){var _,e,o;if(void 0!==(null===(_=t.data)||void 0===_?void 0:_.error))throw null===(o=t.data)||void 0===o?void 0:o.error_description;console.log(null===(e=t.data)||void 0===e?void 0:e.access_token),n(t.data),P(t.data.access_token)})).catch((function(t){P(t.toString())}))}),[n,t.ya.clientID,t.ya.clientSecret]),console.log(o),Object(a.jsx)("h1",{children:r})},x=function(){var t=Object(c.a)(i.a.mark((function t(_){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.a.get("https://github.com/login/oauth/authorize",{params:_,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){return{error:0,data:t.data}})).catch((function(t){return console.error(t),{error:1,data:null}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(_){return t.apply(this,arguments)}}(),m={client_id:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_GH_APP_CLIENT_ID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_GH_APP_CLIENT_ID):"",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_GH_APP_CALLBACK?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_GH_APP_CALLBACK):""};""!==(null===m||void 0===m?void 0:m.client_id)&&x(m).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));var B,V=(B={},Object(U.d)(L(N),B,Object(U.c)(Object(U.a)(Object(H.a)(N))))),w={basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_BASE_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_BASE_PATH):""},z={tokenKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_TOKEN_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_TOKEN_KEY):"",cookieKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_COOKIE_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_COOKIE_KEY):"",publicKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_PUBLIC_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_PUBLIC_KEY):"",api:{basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_API_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_API_PATH):"",domain:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_CURRENT_DOMAIN?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"",REACT_APP_YA_CURI:""}).REACT_APP_CURRENT_DOMAIN):""},ya:{clientID:"",clientSecret:"",callbackURL:""}};E.a.render(Object(a.jsx)(j.a,{store:V,children:Object(a.jsx)(D.a,{history:N,children:Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(b.d,{children:[Object(a.jsx)(b.b,{exact:!0,path:(null===w||void 0===w?void 0:w.basePath)+"/verification/ya",children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(F,Object(o.a)({},z))})}),Object(a.jsx)(b.b,{exact:!0,path:(null===w||void 0===w?void 0:w.basePath)+"/login",children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(h,Object(o.a)({},z))})}),Object(a.jsx)(p,{exact:!0,path:null===w||void 0===w?void 0:w.basePath,appSettings:w,children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(T,Object(o.a)({},z))})}),Object(a.jsx)(b.b,{component:l})]})})})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.0f83afa0.chunk.js.map