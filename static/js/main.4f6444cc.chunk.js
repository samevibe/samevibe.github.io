(this.webpackJsonpsamevibe=this.webpackJsonpsamevibe||[]).push([[0],{168:function(t,e){},170:function(t,e){},183:function(t,e){},185:function(t,e){},213:function(t,e){},215:function(t,e){},216:function(t,e){},221:function(t,e){},223:function(t,e){},229:function(t,e){},231:function(t,e){},250:function(t,e){},262:function(t,e){},265:function(t,e){},282:function(t,e,_){},289:function(t,e,_){},290:function(t,e,_){},317:function(t,e,_){"use strict";_.r(e);var c=_(10),o=_(78),i=_.n(o),a=_(152),n=_(0),A=_.n(n),r=_(50),P=_.n(r),E=_(3),T=function(t){return Object(E.jsx)("h1",{children:"authorized"})},C=_(41),S=_(153),d=_(154),b=_(155),O=_.n(b),s=function(){function t(e){Object(S.a)(this,t),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=e.tokenKey,this.cookieKey=e.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(e.publicKey)?this.authorized=!0:this.removeToken()}return Object(d.a)(t,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var t=localStorage.getItem(this.tokenKey);if(t)return t;var e=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(t=e?decodeURIComponent(e[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(t){if(!this.tokenString)return!1;try{return O.a.verify(this.tokenString,t,{algorithms:["RS256"]}),!0}catch(e){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),t}(),R=(_(282),_(283));var u=function(t){return Object(E.jsx)("form",{className:"login",children:Object(E.jsx)("img",{src:"/img/ya-auth.svg",onClick:function(){var e=R.parse(R.format({protocol:"https",hostname:"oauth.yandex.ru",pathname:"/authorize",query:{response_type:"code",client_id:t.ya.clientID,redirect_uri:t.ya.callbackURL}}));window.open(e.href,"_self")},alt:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u044f\u043d\u0434\u0435\u043a\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})},v=function(t){console.log(t.ya);var e=new s(t),_=A.a.useState(e.isAuthorized());return Object(C.a)(_,1)[0]?Object(E.jsx)("h1",{children:"authorized"}):Object(E.jsx)(u,Object(c.a)({},t))};_(289);var h=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)("h1",{children:"404 Not Found"}),Object(E.jsx)("a",{href:"/",children:"go back to main page"})]})},f=(_(290),_(40)),p=_(14),l=_(38),j=_(158),D=["children","appSettings"];var I=function(t){t.children;var e=t.appSettings,_=Object(j.a)(t,D);return Object(E.jsx)(p.b,Object(c.a)(Object(c.a)({},_),{},{render:function(){return Object(E.jsx)(p.a,{to:(null===e||void 0===e?void 0:e.basePath)+"/login"})}}))},K=_(18),w=_(32),U=_(143),H=!1,Y={authorized:H,payload:{}},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTHORIZE":case"LOGOUT":return Object(c.a)(Object(c.a)({},t),{},{authorized:H});default:return t}},m=function(t){return Object(w.b)({router:Object(l.b)(t),auth:W})},g=Object(K.a)();var L=_(51),N=_.n(L);var k=function(t){var e=Object(n.useState)(),_=Object(C.a)(e,2),c=_[0],o=_[1],i=Object(n.useState)(""),a=Object(C.a)(i,2),A=a[0],r=a[1];return Object(n.useEffect)((function(){var e=new URLSearchParams(window.location.search).get("code")+"",_=new FormData;_.append("grant_type","authorization_code"),_.append("code",e),_.append("client_id",t.ya.clientID),_.append("client_secret",t.ya.clientSecret),N.a.post("https://oauth.yandex.ru/token",_).then((function(t){var e,_,c;if(void 0!==(null===(e=t.data)||void 0===e?void 0:e.error))throw null===(c=t.data)||void 0===c?void 0:c.error_description;console.log(null===(_=t.data)||void 0===_?void 0:_.access_token),o(t.data),r(t.data.access_token)})).catch((function(t){r(t.toString())}))}),[o,t.ya.clientID,t.ya.clientSecret]),console.log(c),Object(E.jsx)("h1",{children:A})},y=function(){var t=Object(a.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.a.get("https://github.com/login/oauth/authorize",{params:e,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){return{error:0,data:t.data}})).catch((function(t){return console.error(t),{error:1,data:null}}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),F={client_id:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CLIENT_ID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CLIENT_ID):"",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CALLBACK?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CALLBACK):""};""!==(null===F||void 0===F?void 0:F.client_id)&&y(F).then((function(t){console.log(t)})).catch((function(t){console.log(t)}));var x,B=(x={},Object(w.d)(m(g),x,Object(w.c)(Object(w.a)(Object(U.a)(g))))),V={basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_BASE_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_BASE_PATH):""},z={tokenKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_TOKEN_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_TOKEN_KEY):"",cookieKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_COOKIE_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_COOKIE_KEY):"",publicKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_PUBLIC_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_PUBLIC_KEY):"",api:{basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_API_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_API_PATH):"",domain:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_CURRENT_DOMAIN?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_CURRENT_DOMAIN):""},ya:{clientID:"",clientSecret:"".concat("bfd06041cfa74505a102bc58b14b1af3"),callbackURL:"".concat("https://www.samevibe.space/")}};P.a.render(Object(E.jsx)(f.a,{store:B,children:Object(E.jsx)(l.a,{history:g,children:Object(E.jsx)(E.Fragment,{children:Object(E.jsxs)(p.d,{children:[Object(E.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/verification/ya",children:Object(E.jsx)(A.a.StrictMode,{children:Object(E.jsx)(k,Object(c.a)({},z))})}),Object(E.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/login",children:Object(E.jsx)(A.a.StrictMode,{children:Object(E.jsx)(v,Object(c.a)({},z))})}),Object(E.jsx)(I,{exact:!0,path:null===V||void 0===V?void 0:V.basePath,appSettings:V,children:Object(E.jsx)(A.a.StrictMode,{children:Object(E.jsx)(T,Object(c.a)({},z))})}),Object(E.jsx)(p.b,{component:h})]})})})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.4f6444cc.chunk.js.map