(this.webpackJsonpsamevibe=this.webpackJsonpsamevibe||[]).push([[0],{168:function(e,t){},170:function(e,t){},183:function(e,t){},185:function(e,t){},213:function(e,t){},215:function(e,t){},216:function(e,t){},221:function(e,t){},223:function(e,t){},229:function(e,t){},231:function(e,t){},250:function(e,t){},262:function(e,t){},265:function(e,t){},282:function(e,t,_){},289:function(e,t,_){},290:function(e,t,_){},317:function(e,t,_){"use strict";_.r(t);var a=_(10),c=_(78),o=_.n(c),i=_(152),n=_(0),A=_.n(n),b=_(50),r=_.n(b),P=_(3),E=function(e){return Object(P.jsx)("h1",{children:"authorized"})},T=_(41),C=_(153),S=_(154),d=_(155),O=_.n(d),s=function(){function e(t){Object(C.a)(this,e),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=t.tokenKey,this.cookieKey=t.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(t.publicKey)?this.authorized=!0:this.removeToken()}return Object(S.a)(e,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var e=localStorage.getItem(this.tokenKey);if(e)return e;var t=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(e=t?decodeURIComponent(t[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(e){if(!this.tokenString)return!1;try{return O.a.verify(this.tokenString,e,{algorithms:["RS256"]}),!0}catch(t){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),e}(),R=(_(282),_(283));var u=function(e){return Object(P.jsx)("form",{className:"login",children:Object(P.jsx)("img",{src:"/img/ya-auth.svg",onClick:function(){var t=R.parse(R.format({protocol:"https",hostname:"oauth.yandex.ru",pathname:"/authorize",query:{response_type:"code",client_id:e.ya.clientID,redirect_uri:e.ya.callbackURL}}));window.open(t.href,"_self")},alt:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u044f\u043d\u0434\u0435\u043a\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})},f=function(e){var t=new s(e),_=A.a.useState(t.isAuthorized());return Object(T.a)(_,1)[0]?Object(P.jsx)("h1",{children:"authorized"}):Object(P.jsx)(u,Object(a.a)({},e))};_(289);var v=function(){return Object(P.jsxs)("div",{children:[Object(P.jsx)("h1",{children:"404 Not Found"}),Object(P.jsx)("a",{href:"/",children:"go back to main page"})]})},h=(_(290),_(40)),p=_(14),l=_(38),j=_(158),D=["children","appSettings"];var I=function(e){e.children;var t=e.appSettings,_=Object(j.a)(e,D);return Object(P.jsx)(p.b,Object(a.a)(Object(a.a)({},_),{},{render:function(){return Object(P.jsx)(p.a,{to:(null===t||void 0===t?void 0:t.basePath)+"/login"})}}))},K=_(18),w=_(32),U=_(143),H=!1,Y={authorized:H,payload:{}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZE":case"LOGOUT":return Object(a.a)(Object(a.a)({},e),{},{authorized:H});default:return e}},m=function(e){return Object(w.b)({router:Object(l.b)(e),auth:W})},L=Object(K.a)();var g=_(51),N=_.n(g);var k=function(e){var t=Object(n.useState)(),_=Object(T.a)(t,2),a=_[0],c=_[1],o=Object(n.useState)(""),i=Object(T.a)(o,2),A=i[0],b=i[1];return Object(n.useEffect)((function(){var t=new URLSearchParams(window.location.search).get("code")+"",_=new FormData;_.append("grant_type","authorization_code"),_.append("code",t),_.append("client_id",e.ya.clientID),_.append("client_secret",e.ya.clientSecret),N.a.post("https://oauth.yandex.ru/token",_).then((function(e){var t,_,a;if(void 0!==(null===(t=e.data)||void 0===t?void 0:t.error))throw null===(a=e.data)||void 0===a?void 0:a.error_description;console.log(null===(_=e.data)||void 0===_?void 0:_.access_token),c(e.data),b(e.data.access_token)})).catch((function(e){b(e.toString())}))}),[c,e.ya.clientID,e.ya.clientSecret]),console.log(a),Object(P.jsx)("h1",{children:A})},y=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.get("https://github.com/login/oauth/authorize",{params:t,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return{error:0,data:e.data}})).catch((function(e){return console.error(e),{error:1,data:null}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={client_id:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CLIENT_ID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CLIENT_ID):"",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CALLBACK?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_GH_APP_CALLBACK):""};""!==(null===F||void 0===F?void 0:F.client_id)&&y(F).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var x,B=(x={},Object(w.d)(m(L),x,Object(w.c)(Object(w.a)(Object(U.a)(L))))),V={basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_BASE_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_BASE_PATH):""},z={tokenKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_TOKEN_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_TOKEN_KEY):"",cookieKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_COOKIE_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_COOKIE_KEY):"",publicKey:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_PUBLIC_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_PUBLIC_KEY):"",api:{basePath:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_API_PATH?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_API_PATH):"",domain:Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_CURRENT_DOMAIN?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/"}).REACT_APP_CURRENT_DOMAIN):""},ya:{clientID:"".concat("1baa5a6c495a47b08807340e55c16f37"),clientSecret:"".concat("bfd06041cfa74505a102bc58b14b1af3"),callbackURL:"".concat("https://www.samevibe.space/")}};r.a.render(Object(P.jsx)(h.a,{store:B,children:Object(P.jsx)(l.a,{history:L,children:Object(P.jsx)(P.Fragment,{children:Object(P.jsxs)(p.d,{children:[Object(P.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/verification/ya",children:Object(P.jsx)(A.a.StrictMode,{children:Object(P.jsx)(k,Object(a.a)({},z))})}),Object(P.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/login",children:Object(P.jsx)(A.a.StrictMode,{children:Object(P.jsx)(f,Object(a.a)({},z))})}),Object(P.jsx)(I,{exact:!0,path:null===V||void 0===V?void 0:V.basePath,appSettings:V,children:Object(P.jsx)(A.a.StrictMode,{children:Object(P.jsx)(E,Object(a.a)({},z))})}),Object(P.jsx)(p.b,{component:v})]})})})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.beb4ea51.chunk.js.map