(this.webpackJsonpsamevibe=this.webpackJsonpsamevibe||[]).push([[0],{168:function(e,t){},170:function(e,t){},183:function(e,t){},185:function(e,t){},213:function(e,t){},215:function(e,t){},216:function(e,t){},221:function(e,t){},223:function(e,t){},229:function(e,t){},231:function(e,t){},250:function(e,t){},262:function(e,t){},265:function(e,t){},282:function(e,t,a){},289:function(e,t,a){},290:function(e,t,a){},317:function(e,t,a){"use strict";a.r(t);var _=a(10),c=a(78),i=a.n(c),n=a(152),o=a(0),A=a.n(o),P=a(50),r=a.n(P),s=a(3),T=function(e){return Object(s.jsx)("h1",{children:"authorized"})},b=a(41),E=a(153),C=a(154),d=a(155),S=a.n(d),O=function(){function e(t){Object(E.a)(this,e),this.tokenKey=void 0,this.cookieKey=void 0,this.tokenString=void 0,this.authorized=!1,this.tokenKey=t.tokenKey,this.cookieKey=t.cookieKey,this.tokenString=this.getTokenString(),this.tokenString&&this.isTokenValid(t.publicKey)?this.authorized=!0:this.removeToken()}return Object(C.a)(e,[{key:"getTokenString",value:function(){if(this.tokenKey&&this.cookieKey){if(this.tokenString)return this.tokenString;var e=localStorage.getItem(this.tokenKey);if(e)return e;var t=document.cookie.match(new RegExp("(?:^|; )"+this.cookieKey.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));return(e=t?decodeURIComponent(t[1]):void 0)||void 0}}},{key:"isTokenValid",value:function(e){if(!this.tokenString)return!1;try{return S.a.verify(this.tokenString,e,{algorithms:["RS256"]}),!0}catch(t){return!1}}},{key:"removeToken",value:function(){localStorage.removeItem(this.tokenKey)}},{key:"isAuthorized",value:function(){return this.authorized}}]),e}(),R=(a(282),a(283));var u=function(e){return Object(s.jsx)("form",{className:"login",children:Object(s.jsx)("img",{src:"/img/ya-auth.svg",onClick:function(){var t=R.parse(R.format({protocol:"https",hostname:"oauth.yandex.ru",pathname:"/authorize",query:{response_type:"code",client_id:e.ya.clientID,redirect_uri:e.ya.callbackURL}}));window.open(t.href,"_self")},alt:"\u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u044f\u043d\u0434\u0435\u043a\u0441 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})})},v=function(e){var t=new O(e),a=A.a.useState(t.isAuthorized());return Object(b.a)(a,1)[0]?Object(s.jsx)("h1",{children:"authorized"}):Object(s.jsx)(u,Object(_.a)({},e))};a(289);var h=function(){return Object(s.jsxs)("div",{children:[Object(s.jsx)("h1",{children:"404 Not Found"}),Object(s.jsx)("a",{href:"/",children:"go back to main page"})]})},f=(a(290),a(40)),p=a(14),l=a(38),w=a(158),j=["children","appSettings"];var I=function(e){e.children;var t=e.appSettings,a=Object(w.a)(e,j);return Object(s.jsx)(p.b,Object(_.a)(Object(_.a)({},a),{},{render:function(){return Object(s.jsx)(p.a,{to:(null===t||void 0===t?void 0:t.basePath)+"/login"})}}))},D=a(18),H=a(32),K=a(143),m=!1,y={authorized:m,payload:{}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHORIZE":case"LOGOUT":return Object(_.a)(Object(_.a)({},e),{},{authorized:m});default:return e}},g=function(e){return Object(H.b)({router:Object(l.b)(e),auth:U})},Y=Object(D.a)();var k=a(51),L=a.n(k);var W=function(e){var t=Object(o.useState)(),a=Object(b.a)(t,2),_=a[0],c=a[1],i=Object(o.useState)(""),n=Object(b.a)(i,2),A=n[0],P=n[1];return Object(o.useEffect)((function(){var t=new URLSearchParams(window.location.search).get("code")+"",a=new FormData;a.append("grant_type","authorization_code"),a.append("code",t),a.append("client_id",e.ya.clientID),a.append("client_secret",e.ya.clientSecret),L.a.post("https://oauth.yandex.ru/token",a).then((function(e){var t,a,_;if(void 0!==(null===(t=e.data)||void 0===t?void 0:t.error))throw null===(_=e.data)||void 0===_?void 0:_.error_description;console.log(null===(a=e.data)||void 0===a?void 0:a.access_token),c(e.data),P(e.data.access_token)})).catch((function(e){P(e.toString())}))}),[c,e.ya.clientID,e.ya.clientSecret]),console.log(_),Object(s.jsx)("h1",{children:A})},N=function(){var e=Object(n.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.a.get("https://github.com/login/oauth/authorize",{params:t,headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){return{error:0,data:e.data}})).catch((function(e){return console.error(e),{error:1,data:null}}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x={client_id:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_GH_APP_CLIENT_ID?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_GH_APP_CLIENT_ID):"",redirect_uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_GH_APP_CALLBACK?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_GH_APP_CALLBACK):""};""!==(null===x||void 0===x?void 0:x.client_id)&&N(x).then((function(e){console.log(e)})).catch((function(e){console.log(e)}));var B,F=(B={},Object(H.d)(g(Y),B,Object(H.c)(Object(H.a)(Object(K.a)(Y))))),V={basePath:""},z={tokenKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_TOKEN_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_TOKEN_KEY):"",cookieKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_COOKIE_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_COOKIE_KEY):"",publicKey:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_PUBLIC_KEY?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_PUBLIC_KEY):"",api:{basePath:"".concat("https://www.samevibe.space"),domain:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_CURRENT_DOMAIN?"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_PATH:"",REACT_APP_YA_CID:"1baa5a6c495a47b08807340e55c16f37",REACT_APP_API_PATH:"https://www.samevibe.space",REACT_APP_YA_CIS:"bfd06041cfa74505a102bc58b14b1af3",REACT_APP_YA_CURI:"https://www.samevibe.space/verification/ya"}).REACT_APP_CURRENT_DOMAIN):""},ya:{clientID:"".concat("1baa5a6c495a47b08807340e55c16f37"),clientSecret:"".concat("bfd06041cfa74505a102bc58b14b1af3"),callbackURL:"".concat("https://www.samevibe.space/verification/ya")}};r.a.render(Object(s.jsx)(f.a,{store:F,children:Object(s.jsx)(l.a,{history:Y,children:Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(p.d,{children:[Object(s.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/verification/ya",children:Object(s.jsx)(A.a.StrictMode,{children:Object(s.jsx)(W,Object(_.a)({},z))})}),Object(s.jsx)(p.b,{exact:!0,path:(null===V||void 0===V?void 0:V.basePath)+"/login",children:Object(s.jsx)(A.a.StrictMode,{children:Object(s.jsx)(v,Object(_.a)({},z))})}),Object(s.jsx)(I,{exact:!0,path:null===V||void 0===V?void 0:V.basePath,appSettings:V,children:Object(s.jsx)(A.a.StrictMode,{children:Object(s.jsx)(T,Object(_.a)({},z))})}),Object(s.jsx)(p.b,{component:h})]})})})}),document.getElementById("root"))}},[[317,1,2]]]);
//# sourceMappingURL=main.40133ffc.chunk.js.map